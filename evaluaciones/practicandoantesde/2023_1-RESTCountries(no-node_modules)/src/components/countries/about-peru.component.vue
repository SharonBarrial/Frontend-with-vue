<script setup>
// import ref and onMounted from 'vue'
import { ref, onMounted } from "vue"
// import the GetApiService
import GetApiService from "@/services/get-api.service"

// ref for storing a country object
const country = ref({})

// fetch country data from the API with onMounted
onMounted(async () => {
  const response = await GetApiService.getAll()
  country.value = response.data[0]
})
</script>

<template>

  <pv-card role="article">
    <template #header>
      <img
        alt="Country flag"
        :src="country?.flags?.png"
      >
    </template>

    <template #title>{{ country?.name?.common }}</template>
    <template #subtitle>{{ country?.name?.official }}</template>
    <template #content>
      <p>{{ country?.currencies?.PEN?.name }}</p>
      <p>{{ country?.currencies?.PEN?.symbol }}</p>
      <p>{{ country?.region }}</p>
      <p>{{ country?.subregion }}</p>
      <p>{{ country?.languages?.aym }}, {{ country?.languages?.que }}, {{ country?.languages?.spa }}</p>
      <p>{{ country?.area }}</p>
      <p>{{ country?.population }}</p>
      <p v-if="country && country.capital">{{ country.capital[0] }}</p>
    </template>

    <template #footer>
      <img
        alt="Country Coat of Arms"
        :src="country?.coatOfArms?.png"
        width="200px"
      />
    </template>
  </pv-card>

</template>

<style scoped>

</style>